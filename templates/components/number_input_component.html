<div class="relative">
  <label for="{{ input_id }}" class="block text-sm font-medium text-gray-700">{{ label }}</label>
  <div class="mt-1 relative rounded-md shadow-sm">
    <input type="text" id="{{ input_id }}" name="{{ name }}" 
        class="w-full rounded-md bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600 focus:outline focus:outline-4 focus:outline-indigo-300 dark:focus:outline-indigo-500 focus:border-none focus:ring-0 transition-colors duration-200 px-2 py-2" hx-post="{{ hx_post_url }}" hx-trigger="input changed delay:500ms" hx-target="#{{ input_id }}-validation" hx-indicator=".loading-spinner" value="{{ value }}" placeholder="{{ placeholder }}" data-mask="{{ mask }}" oninput="validateInput(this)" />
    <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
      <span class="text-gray-500 sm:text-sm loading-spinner hidden">‚è≥</span>
    </div>
  </div>
  <p id="{{ input_id }}-validation" class="mt-2 text-sm text-red-600">{{ error_message }}</p>
</div>

<script>
  function validateInput(input) {
    const validationMessageElement = document.getElementById(`${input.id}-validation`)
    if (validationMessageElement && validationMessageElement.innerText.trim()) {
      input.classList.add('border-red-600')
      input.classList.remove('border-gray-300', 'dark:border-gray-600')
    } else {
      input.classList.remove('border-red-600')
      input.classList.add('border-gray-300', 'dark:border-gray-600')
    }
  }
</script>
