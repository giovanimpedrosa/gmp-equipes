{% extends request.GET.popup|yesno:"base_popup.html,base.html" %} {% block title %} {{ action }} Projeto{% endblock %} {% block content %}
<div class="{% if not request.GET.popup %}max-w-3xl mx-auto{% endif %}">
  <h2 class="text-2xl font-bold mb-6 text-gray-900 dark:text-white">
    {{ action }} Projeto
  </h2>
  <div class="bg-white dark:bg-gray-800 shadow rounded-lg flex flex-col">
    <form
      method="post"
      enctype="multipart/form-data"
      class="flex flex-col h-full"
    >
      {% csrf_token %}
      <div class="p-6 flex-grow">
        {% for field in form %}
        <div class="mb-4">
          <label
            for="{{ field.id_for_label }}"
            class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"
          >
            {{ field.label }}
          </label>
          {% if field.errors %}
          <div class="text-red-600 dark:text-red-400 text-sm mb-2">
            {{ field.errors }}
          </div>
          {% endif %} {% if field.name == 'photo' %}
          <div class="flex items-center gap-4">
            {% if project.photo %}
              <img src="{{ project.photo.url }}" 
                   alt="Foto atual" 
                   class="w-24 h-24 object-cover rounded-lg">
            {% endif %}
            <input
              type="file"
              name="{{ field.name }}"
              id="{{ field.id_for_label }}"
              accept="image/*"
              class="block w-full text-sm text-gray-900 dark:text-white
                     file:mr-4 file:py-2 file:px-4
                     file:rounded-md file:border-0
                     file:text-sm file:font-medium
                     file:bg-indigo-50 file:text-indigo-700
                     dark:file:bg-indigo-900 dark:file:text-indigo-300
                     hover:file:bg-indigo-100 dark:hover:file:bg-indigo-800
                     transition-colors duration-200"
            />
          </div>
          {% elif field.name == 'detailed_description' %}
          {{ field.as_widget }}
          {% else %}
          <input
            type="{{ field.field.widget.input_type }}"
            name="{{ field.name }}"
            id="{{ field.id_for_label }}"
            value="{{ field.value|default:'' }}"
            class="w-full rounded-md bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white
                   border border-gray-300 dark:border-gray-600
                   focus:outline focus:outline-2 focus:outline-indigo-600 dark:focus:outline-indigo-500
                   focus:border-none focus:ring-0
                   transition-colors duration-200
                   px-4 py-3
                   {% if field.errors %}border-2 border-red-500{% endif %}"
          />
          {% endif %} {% if field.help_text %}
          <p class="mt-2 text-sm text-gray-500 dark:text-gray-400">
            {{ field.help_text }}
          </p>
          {% endif %}
        </div>
        {% endfor %}
      </div>
      <div
        class="px-4 py-3 bg-gray-50 dark:bg-gray-600 border-t border-gray-200 dark:border-gray-500 rounded-b-lg"
      >
        <div class="flex justify-end space-x-2">
          <button
            type="submit"
            class="text-indigo-600 dark:text-indigo-400 hover:text-indigo-900 dark:hover:text-indigo-300"
          >
            {{ action }}
          </button>
          <button
            type="button"
            class="text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-300"
          >
            Cancelar
          </button>
        </div>
      </div>
    </form>
  </div>
</div>

{{ form.media }}
{% endblock %}
